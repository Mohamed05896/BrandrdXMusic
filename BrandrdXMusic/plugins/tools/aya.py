import asyncio
import random
from pyrogram import filters
from pyrogram.types import Message
from BrandrdXMusic import app

# قائمة الآيات القرآنية (تمت زيادة العدد)
MALATH = [
    "‏﴿وَمَا كَانَ اللَّهُ لِيُعْجِزَهُ مِن شَيْءٍ﴾ .💙",
    "( إِنَّ المُتَّقينَ في جَنَّاتٍ وَنَهَرٍ ۝ في مَقعَدِ صِدقٍ عِندَ مَليكٍ مُقتَدِرٍ \")💙",
    "‏{لَقَدْ كُنْتَ فِي غَفْلَةٍ مِنْ هَذَا فَكَشَفْنَا عَنْكَ غِطَاءَكَ فَبَصَرُكَ الْيَوْمَ حَدِيدٌ}.💙",
    "(قُلْ هُوَ اللَّـهُ أَحَدٌ*اللَّـهُ الصَّمَدُ*لَمْ يَلِدْ وَلَمْ يُولَدْ*وَلَمْ يَكُن لَّهُ كُفُوًا أَحَدٌ). 💙",
    "‏﴿لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا ۚ لَهَا مَا كَسَبَتْ وَعَلَيْهَا مَا اكْتَسَبَتْ﴾💙",
    "{وَمَاَ كَاَنَ اللهُ مُعَذّبَهُمْ وَهُمْ يَسْتَغْفِرُونَ} 💙 .",
    "(الْحَمْدُ لِلَّهِ الَّذِي أَنْزَلَ عَلَىٰ عَبْدِهِ الْكِتَابَ وَلَمْ يَجْعَلْ لَهُ عِوجًا)💙",
    "﴿ نُصيبُ بِرَحمَتِنا مَن نَشاءُ وَلا نُضيعُ أَجرَ المُحسِنينَ ﴾💙",
    "وَمَا كَانَ رَبُّكَ نَسِيًّا .💙",
    "(‏فَاصْبِرْ إِنَّ وَعْدَ اللَّهِ حَقٌّ ۖ)💙",
    "‏﴿ وَالصُّبْحِ إِذَا تَنَفَّسَ ﴾.💙",
    "﴿أَقِمِ الصَّلاةَ لِدُلُوكِ الشَّمْسِ إِلَى غَسَقِ اللَّيْلِ وَقُرْآنَ الْفَجْرِ إِنَّ قُرْآنَ الْفَجْرِ كَانَ مَشْهُودًا﴾ .💙",
    "﴿ لَا تَقْنَطُوا مِنْ رَحْمَةِ اللَّهِ ۚ﴾ .💙",
    "۞ إِنَّمَا يُوَفَّى الصَّابِرُونَ أَجْرَهُمْ بِغَيْرِ حِسَابٍ ۞💙",
    "‏﴿يَا أَيُّهَا الَّذِينَ آمَنُوا صَلُّوا عَلَيْهِ وَسَلِّمُوا تَسْلِيمًا﴾💙",
    "‏﴿رَبِّ إِنِّي ظَلَمْتُ نَفْسِي فَاغْفِرْ لِي﴾.💙",
    "(‏فَإِنَّ مَعَ الْعُسْرِ يُسْرًا * إِنَّ مَعَ الْعُسْرِ يُسْرًا) 💙",
    "﴿وَقُل رَبِّ زِدني عِلمًا﴾ 💙",
    "﴿فَاذكُروني أَذكُركم وَاشكُروا لي وَلا تَكفُرونِ﴾ 💙",
    "﴿إِنَّ اللَّهَ وَمَلائِكَتَهُ يُصَلُّونَ عَلَى النَّبِيِّ يَا أَيُّهَا الَّذِينَ آمَنُوا صَلُّوا عَلَيْهِ وَسَلِّمُوا تَسْلِيمًا﴾ 💙",
    "﴿رَبِّ اشرَح لي صَدري * وَيَسِّر لي أَمري﴾ 💙",
    "﴿وَإِذا سَأَلَكَ عِبادي عَنّي فَإِنّي قَريبٌ﴾ 💙",
    "﴿لَقَدْ جَاءَكُمْ رَسُولٌ مِنْ أَنْفُسِكُمْ عَزِيزٌ عَلَيْهِ مَا عَنِتُّمْ حَرِيصٌ عَلَيْكُمْ بِالْمُؤْمِنِينَ رَءُوفٌ رَحِيمٌ﴾ 💙",
    "‏إِنَّ رَبِّي قَرِيبٌ مُّجِيبٌ .💙",
    "( وَقَالُوا الْحَمْدُ لِلَّهِ الَّذِي أَذْهَبَ عَنَّا الْحَزَنَ ۖ إِنَّ رَبَّنَا لَغَفُورٌ شَكُورٌ )💙"
]

# 1. الرد التلقائي لما أي عضو يكتب "ملل"
@app.on_message(filters.text & filters.regex(r"^ملل$") & ~filters.bot)
async def auto_malal(client, message: Message):
    choice = random.choice(MALATH)
    # الرد بمنشن للشخص مع الآية
    await message.reply_text(
        f"**بدل الملل يا {message.from_user.mention} اذكر الله واستمع للآية:**\n\n{choice}"
    )

# 2. أمر ".ايه" للمطور (يعدل رسالته)
@app.on_message(filters.command("ايه", prefixes=".") & filters.me)
async def manual_aya(client, message: Message):
    await message.edit("**⌔∮ جاري اختيار آية كريمة... 🌺**")
    await asyncio.sleep(1.5)
    choice = random.choice(MALATH)
    await message.edit(f"**⌔∮ آية كريمة تريح القلوب :**\n\n{choice}")

# 3. أمر "ايه نصيه" (لو حد كتبها في الشات كأمر عام)
@app.on_message(filters.regex(r"^ايه نصيه$") & ~filters.bot)
async def text_aya_cmd(client, message: Message):
    choice = random.choice(MALATH)
    await message.reply_text(choice)

# ➻ sᴏᴜʀᴄᴇ : بُودَا | ʙᴏᴅᴀ
