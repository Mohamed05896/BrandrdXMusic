import asyncio
import random
from pyrogram import filters
from pyrogram.types import Message
from BrandrdXMusic import app

# ➻ sᴏᴜʀᴄᴇ : بُودَا | ʙᴏᴅَا

# قائمة الآيات القرآنية (تم زيادة العدد لـ 45 آية لراحة القلب وفك الملل)
MALATH = [
    "‏﴿وَمَا كَانَ اللَّهُ لِيُعْجِزَهُ مِن شَيْءٍ﴾ .💙",
    "( إِنَّ المُتَّقينَ في جَنَّاتٍ وَنَهَرٍ ۝ في مَقعَدِ صِدقٍ عِندَ مَليكٍ مُقتَدِرٍ \")💙",
    "﴿أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ﴾ .💙",
    "﴿وَلَسَوْفَ يُعْطِيكَ رَبُّكَ فَتَرْضَىٰ﴾ .💙",
    "﴿فَإِنَّ مَعَ الْعُسْرِ يُسْرًا * إِنَّ مَعَ الْعُسْرِ يُسْرًا﴾ .💙",
    "﴿لَا تَدْرِي لَعَلَّ اللَّهَ يُحْدِثُ بَعْدَ ذَلِكَ أَمْرًا﴾ .💙",
    "﴿أَلَمْ نَشْرَحْ لَكَ صَدْرَكَ﴾ .💙",
    "﴿وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا﴾ .💙",
    "﴿إِنَّ مَعِيَ رَبِّي سَيَهْدِينِ﴾ .💙",
    "﴿لَا تَحْزَنْ إِنَّ اللَّهَ مَعَنَا﴾ .💙",
    "﴿وَقَالَ رَبُّكُمُ ادْعُونِي أَسْتَجِبْ لَكُمْ﴾ .💙",
    "﴿وَنُنَزِّلُ مِنَ الْقُرْآنِ مَا هُوَ شِفَاءٌ وَرَحْمَةٌ لِّلْمُؤْمِنِينَ﴾ .💙",
    "﴿فَصَبْرٌ جَمِيلٌ ۖ وَاللَّهُ الْمُسْتَعَانُ عَلَىٰ مَا تَصِفُونَ﴾ .💙",
    "‏﴿لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا﴾ 💙",
    "‏إِنَّ رَبِّي قَرِيبٌ مُّجِيبٌ .💙",
    "﴿وَرَحْمَتِي وَسِعَتْ كُلَّ شَيْءٍ﴾ .💙",
    "﴿نَبِّئْ عِبَادِي أَنِّي أَنَا الْغَفُورُ الرَّحِيمُ﴾ .💙",
    "﴿فَاصْبِرْ صَبْرًا جَمِيلًا﴾ .💙",
    "﴿وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ﴾ .💙",
    "﴿أَلَيْسَ اللَّهُ بِكَافٍ عَبْدَهُ﴾ .💙",
    "﴿قُلِ اللَّهُ يُنَجِّيكُم مِّنْهَا وَمِن كُلِّ كَرْبٍ﴾ .💙",
    "﴿وَاصْبِرْ لِحُكْمِ رَبِّكَ فَإِنَّكَ بِأَعْيُنِنَا﴾ .💙",
    "﴿سَيَجْعَلُ اللَّهُ بَعْدَ عُسْرٍ يُسْرًا﴾ .💙",
    "﴿إِنَّ رَحْمَتَ اللَّهِ قَرِيبٌ مِّنَ الْمُحْسِنِينَ﴾ .💙",
    "﴿وَعَسَى أَن تَكْرَهُوا شَيْئًا وَهُوَ خَيْرٌ لَّكُمْ﴾ .💙",
    "﴿وَاسْتَعِينُوا بِالصَّبْرِ وَالصَّلَاةِ﴾ .💙",
    "﴿وَبَشِّرِ الصَّابِرِينَ﴾ .💙",
    "﴿إِنَّ اللَّهَ مَعَ الصَّابِرِينَ﴾ .💙",
    "﴿وَكَانَ فَضْلُ اللَّهِ عَلَيْكَ عَظِيمًا﴾ .💙",
    "﴿فَدَعَا رَبَّهُ أَنِّي مَغْلُوبٌ فَانتَصِرْ﴾ .💙",
    "﴿إِنَّ مَعِيَ رَبِّي سَيَهْدِينِ﴾ .💙",
    "﴿وَمَا تَوْفِيقِي إِلَّا بِاللَّهِ﴾ .💙",
    "﴿فَسَيَكْفِيكَهُمُ اللَّهُ ۚ وَهُوَ السَّمِيعُ الْعَلِيمُ﴾ .💙",
    "﴿أَمَّن يُجِيبُ الْمُضْطَرَّ إِذَا دَعَاهُ وَيَكْشِفُ السُّوءَ﴾ .💙",
    "﴿قَالَ لَا تَخَافَا ۖ إِنَّني مَعَكُمَا أَسْمَعُ وَأَرَىٰ﴾ .💙",
    "﴿وَلَا تَهِنُوا وَلَا تَحْزَنُوا وَأَنتُمُ الْأَعْلَوْنَ إِن كُنتُم مُّؤْمِنِينَ﴾ .💙",
    "﴿رَبَّنَا لَا تُزِغْ قُلُوبَنَا بَعْدَ إِذْ هَدَيْتَنَا﴾ .💙",
    "﴿وَالْبَاقِيَاتُ الصَّالِحَاتُ خَيْرٌ عِندَ رَبِّكَ ثَوَابًا وَخَيْرٌ أَمَلًا﴾ .💙",
    "﴿وَمَا كَانَ اللَّهُ مُعَذِّبَهُمْ وَهُمْ يَسْتَغْفِرُونَ﴾ .💙",
    "﴿فَاسْتَجَبْنَا لَهُ وَنَجَّيْنَاهُ مِنَ الْغَمِّ ۚ وَكَذَٰلِكَ نُنجِي الْمُؤْمِنِينَ﴾ .💙",
    "﴿رَبِّ لَا تَذَرْنِي فَرْدًا وَأَنتَ خَيْرُ الْوَارِثِينَ﴾ .💙",
    "﴿إِنَّ رَبِّي لَسَمِيعُ الدُّعَاءِ﴾ .💙",
    "﴿وَقُل رَّبِّ أَنزِلْنِي مُنزَلًا مُّبَارَكًا وَأَنتَ خَيْرُ الْمُنزِلِينَ﴾ .💙",
    "﴿إِنَّ اللَّهَ يُحِبُّ الْمُتَوَكِّلِينَ﴾ .💙",
    "( وَقَالُوا الْحَمْدُ لِلَّهِ الَّذِي أَذْهَبَ عَنَّا الْحَزَنَ )💙"
]

# 1. الرد التلقائي (الخاص والجروبات)
@app.on_message(filters.text & filters.regex(r"^ملل$") & ~filters.bot)
async def auto_malal(client, message: Message):
    choice = random.choice(MALATH)
    user_name = message.from_user.first_name if message.chat.type == "private" else message.from_user.mention
    await message.reply_text(
        f"**بدل الملل يا {user_name} اذكر الله واستمع للآية:**\n\n{choice}\n\n➻ sᴏᴜʀᴄᴇ : بُودَا | ʙᴏᴅَا"
    )
    message.continue_propagation()

# 2. أمر ".ايه" للمطور (تعديل الرسالة)
@app.on_message(filters.command("ايه", prefixes=".") & filters.me)
async def manual_aya(client, message: Message):
    await message.edit("**⌔∮ جاري اختيار آية كريمة تريح قلبك... 🌺**")
    await asyncio.sleep(1.2)
    choice = random.choice(MALATH)
    await message.edit(f"**⌔∮ آية كريمة تريح القلوب :**\n\n{choice}\n\n➻ sᴏᴜʀᴄᴇ : بُودَا | ʙᴏᴅَا")
    message.continue_propagation()

# 3. أمر "ايه نصيه" (عام)
@app.on_message(filters.regex(r"^ايه نصيه$") & ~filters.bot)
async def text_aya_cmd(client, message: Message):
    choice = random.choice(MALATH)
    await message.reply_text(f"{choice}\n\n➻ sᴏᴜʀᴄᴇ : بُودَا | ʙᴏᴅَا")
    message.continue_propagation()

# ➻ sᴏᴜʀᴄᴇ : بُودَا | ʙᴏᴅَا
